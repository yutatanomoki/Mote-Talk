
<div class="contents talk-room-frame">
  <div class="talk-messages">
    <%# 下記の条件分岐は、メッセージがない状態だと入力フォームが上に来てしまうため %>
    <% if @dms.present?%>
      <% @dms.each do |dm| %>
        <% if dm.user_id == current_user.id %>
          <div class="right-messege">
            <div class="msg-wrap">
              <div class="talk-msg">
                <pre class="talk-msg-text"><%= dm.message %></pre>
                <p class="send-time"><%= dm.created_at.strftime("%Y-%m-%d:%H:%M") %></p>
              </div>
            </div>
          </div>
          <!--<div class="self">-->
          <!--  <p  class="self__message nomal-font responsive-font-sm" style="text-align: right; color:#fff; background-color:#a6c2b8;"><%#= dm.message %></p>-->
          <!--</div>-->
        <% else %>
          <div class="left-messege">
            <div class="msg-wrap">
              <p class="avatar"></p>
              <div class="talk-msg">
                <pre class="talk-msg-text"><%= dm.message %></pre>
                <p class="send-time"><%= dm.created_at.strftime("%Y-%m-%d:%H:%M") %></p>
              </div>
            </div>
          </div>
          <!--<div class="other">-->
          <!--  <%#= attachment_image_tag @user, :image, format: 'jpeg',fallback: "no_image.jpg", class:"other__image" %>-->
          <!--  <p class="other__message nomal-font responsive-font-sm" style="text-align: left; color:#1b515c;"><%#= dm.message %></p>-->
          <!--</div>-->
        <% end %>
      <% end %>
    <% else %>
    <%# メッセージが何もない場合 %>
    <div class="dm-no-content"></div>
  <% end %>
  </div>
  <div class="dm-form">
    <p class="reservation-btn"><i class="far fa-calendar-alt">予約</i></p>
    <%= form_with model: @dm, data: {remote: true}, url: direct_messages_path do |f| %>
        <%= f.text_field :message, class: "text-area" %>
        <%= f.hidden_field :room_id %>
        <%# 767px以下のみ表示 %>
        <%= f.button type: "submit", class:"btn green-btn btn-sm" do %><i class="far fa-paper-plane send-btn"></i><% end %>
    <% end %>
  </div>
</div>

